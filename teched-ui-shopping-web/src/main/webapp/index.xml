<?xml version="1.0" encoding="UTF-8"?>  
<Module>  
    <ModulePrefs title="ESPM Shop Application" height="250">  
        <Require feature="sap-context" />
        <Optional feature="content-rewrite">
	      <Param name="exclude-urls">.*</Param>
	    </Optional>
    </ModulePrefs> 
	
    <Content type="html">  
    <![CDATA[
	    <script id="sap-ui-bootstrap" src="https://sapui5.netweaver.ondemand.com/resources/sap-ui-core.js"
	        data-sap-ui-theme="sap_goldreflection"
	        data-sap-ui-libs="sap.ui.commons, sap.m, sap.ui.ux3">
	    </script>
	        
	    <script type="text/javascript">
			
			var host = "https://techedespmd039236trial.hanatrial.ondemand.com";
			
			function getUrl(url)
			{
				return gadgets.io.getProxyUrl(host + "/teched-ui-shopping-web/" + url);
			}
			
			// configure namespaces for UI5
			jQuery.sap.registerModulePath("app", getUrl("portal/js"));
			jQuery.sap.registerModulePath("css", getUrl("css"));
			jQuery.sap.registerModulePath("composite.productActions", getUrl("js/controls/productActions"));
			jQuery.sap.registerModulePath("app.config", getUrl("js/config"));
			jQuery.sap.registerModulePath("app.formatter", getUrl("js/formatter"));
			jQuery.sap.registerModulePath("app.messages", getUrl("js/messages"));
			jQuery.sap.registerModulePath("app.utility", getUrl("js/utility"));
			jQuery.sap.registerModulePath("app.validator", getUrl("js/validator"));
			jQuery.sap.registerModulePath("app.welcome", getUrl("js/welcome"));
			jQuery.sap.registerModulePath("espm-ui-shopping-web", getUrl("espm-ui-shopping-web"));
			jQuery.sap.registerModulePath("i18n", getUrl("i18n"));
			jQuery.sap.registerModulePath("proxy", getUrl("proxy"));
		
		</script>
		
		<script src="portal/js/app.js"></script>
		
		<body class="sapUiBody" role="application" >

			<script language="javascript" type="text/javascript">  
	    	
		        var oEventBus = sap.ui.getCore().getEventBus();
				oEventBus.subscribe("sap.app", "selectedProductIdChanged", function(channelId, eventId, selectedProductId) 
				{
					gadgets.sapcontext.publish("selectedKey", selectedProductId);  
				});
		  
	    	</script>  
			
			<div id='content'></div>
		</body>
	]]>  
    </Content>  
</Module>  

